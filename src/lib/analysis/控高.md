#  控高

<div data-sunwayTheme='light'>
  <EpsplanetEarth :showDefaultBasemap="true" @onReady="ready">
    <EpsplanetButton container="#earthContainer" icon="icon-tool_kjcx" type="panel" :position="position" :panel="panel" title='控高分析'>
      <EpsplanetControlHeight/>
    </EpsplanetButton>
  </EpsplanetEarth>
</div>

<script setup lang='ts'>
import {ref} from 'vue';
const position = ref({
  left: 10,
  top: 10
});
const panel = ref({
//   size: {
//     width: '300px',
//     height: '300px'
//   },
  position: {
    left: 10,
    top: 10
  }
});
const ready = (earth:any)=>{
    console.log(earth)
  earth.sceneTree.root.children.push(
  {
    ref: 'tileset',
    czmObject: {
      "xbsjType": "Tileset",
      "xbsjGuid": "d3266895-4795-41a1-92f3-46be5edc6532",
      "name": "大雁塔",
      "url": "/EPSGIS-DEV-PORTAL/dayanta/tileset.json",
      "xbsjPosition": [
        1.9017002809975097,
        0.5972446887154512,
        -300
      ],
      xbsjUseOriginTransform:false
    }
  }
  )
  earth.sceneTree.$refs.tileset.czmObject.flyTo()
}
</script>

## 标签

```vue
<epsplanet-control-height></epsplanet-control-height>
```
<!-- ## 界面 -->
<!-- ![全域控高](../../assets/controlHeight.png) -->

::: info 用法
 **整体控高**：模型下拉框会自动获取系统中已加载的3DTiles服务。选择其中一个服务，系统对服务全域进行控高面的生成，通过操作高度滑块控制控高面的高度进行细致查看。
 **自定义控高**：选择自定义控高后，通过下拉框选择需要进行操作的服务，系统自动飞行至该服务，然后点击创建即可进行绘制控高区域，绘制完成后系统自动计算所绘制区域的最高点和最低点，计算完毕后生成控高面，同时可以通过滑块控制控高面的高度，点击编辑即可对控高面进行重新编辑。
:::

